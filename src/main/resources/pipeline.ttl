@prefix jvm: <https://w3id.org/conn/jvm#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix owl: <http://www.w3.org/2002/07/owl#>.

# Definition of a Processor.
[]
  a sh:NodeShape;
  sh:targetClass jvm:Processor;
  sh:closed true;
  sh:ignoredProperties ( rdf:type ).

# A bridge takes in a reader and writer.
[]
  a sh:NodeShape;
  sh:targetClass jvm:Channel;
  sh:properties [
    sh:path jvm:reader;
    sh:node jvm:ChannelReader;
    sh:minCount 1;
    sh:maxCount 1;
  ], [
    sh:path jvm:writer;
    sh:node jvm:ChannelWriter;
    sh:minCount 1;
    sh:maxCount 1;
  ].

# Memory channels are specific channels.
jvm:MemoryChannel rdfs:subClassOf jvm:Channel.
jvm:MemoryChannelWriter rdfs:subClassOf jvm:ChannelWriter.
jvm:MemoryChannelReader rdfs:subClassOf jvm:ChannelReader.

# Define a memory bridge reader.
[]
  a sh:NodeShape;
  sh:targetClass jvm:MemoryChannelReader;
  sh:closed true;
  sh:ignoredProperties ( rdf:type ).

# Define a memory bridge writer.
[]
  a sh:NodeShape;
  sh:targetClass jvm:MemoryChannelWriter;
  sh:closed true;
  sh:ignoredProperties ( rdf:type ).

# A memory bridge takes in a single reader and writer.
[]
  a sh:NodeShape;
  sh:targetClass jvm:MemoryChannel;
  sh:property [
    sh:path jvm:reader;
    sh:node jvm:MemoryChannelReader;
    sh:minCount 1;
    sh:maxCount 1;
  ], [
    sh:path jvm:writer;
    sh:node jvm:MemoryChannelWriter;
    sh:minCount 1;
    sh:maxCount 1;
  ];
  sh:closed true;
  sh:ignoredProperties ( rdf:type ).

# HTTP Channels are specific channels.
jvm:HttpChannelReader rdfs:subClassOf jvm:ChannelReader.
jvm:HttpChannelWriter rdfs:subClassOf jvm:ChannelWriter.

# Define a HTTP reader.
[]
  a sh:NodeShape;
  sh:targetClass jvm:HttpChannelReader;
  sh:property [
    sh:path jvm:port;
    sh:datatype xsd:integer;
    sh:maxCount 1;
  ];
  sh:closed true;
  sh:ignoredProperties ( rdf:type ).

# Define a HTTP writer.
[]
  a sh:NodeShape;
  sh:targetClass jvm:HttpChannelWriter;
  sh:property [
    sh:path jvm:endpoint;
    sh:datatype xsd:string;
    sh:maxCount 1;
  ];
  sh:closed true;
  sh:ignoredProperties ( rdf:type ).
